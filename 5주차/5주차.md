# 5주차

## 케이블과 리피터, 허브속을 신호가 흘러간다

### 1.LAN케이블은 신호를 약화시키지 않는 핵심이다

LAN어댑터의 **PHY(MAU)**회로에서 전기 신호로 형태를 바꾼 패킷은 **RJ-45** 커넥터를 통해 트위스트 페어 케이블에 들어간다.

이더넷의 신호는 LAN어댑터의 PHY(MAU)회로의 플러스와 마이너스 신호 단자에서 신호가 나온다.

송출한 신호는 그대로 도착하는 것이 아닌 신호가 조금 약해져 있다.

잡음이 없고 조건이 좋은 경우에도 신호가 도착할 때는 이와 같이 변형되는데, 이것이 잡음의 영향까지 더해지면 매우 심각해진다.

여기나오는 잡음이란 어떤형식인기 궁금합니다.(아날로그→디지털→아날로그 방식(디지털공학)은 아닌것 같아 궁금합니다!)

### 2.’꼼’은 잡음을 방지하기 위한 방법이다

누설되는 전자파, 인접한 신호선에서 누출되는 전자파(**크로스 토크**) 모두 꼼현상을 통해 잡음을 방지할 수 있다.

3.리피터 허브는 연결되어 있는 전체 케이블에 신호를 송신한다.

리피터 허브에서 LAN어댑터와 같이 RJ-45커넥터에 직접 접속하면 신호를 제대로 수신할 수 없다. 

따라서 **MDI/MDI-X**라는 전환 스위치가 존재한다.

MDI는 RJ-45커넥터와 신호 송수신 회로를 직접 결선(연결)한 것이고, MDI-X는 교차하여 결선(연결)하는 것을 나타낸다.

리피터 회로의 기본은 신호를 그대로 뿌리는 것이므로 잡음의 영향을 받아 변형되고 데이터가 변화한 것  같은 신호라도 그대로 흘려버린다.

이 경우 신호가 다음기기, 즉 스위칭 허브, 라우터, 서버 등에 도달하여  디지털 데이터로 변환되고, FCS를 검사하는 곳에서 데이터 변화가 판명된 후 변화된 패킷을 폐기 된다.

하지만 폐기 되는 것은 아니고 TCP에서 패킷을 재송신 한다.

## 스위칭 허브의 패킷 중계 동작

### 1.스위칭 허브는 주소 테이블로 중계한다

스위칭 허브의 포트는 PC의 LAN어댑터와 비슷하다

LAN어댑터는 **MAC주소**가 할당되어 있어서 수신한 패킷의 수신처MAC주소가 자신에게 해당하지 않는 경우에는 패킷을 폐기한다.

반면 스위칭 허브의 포트는 수신처 MAC주소를 검사하지 않고 모든 패킷을 수신하여 버퍼 메모리에 저장하기 때문에 스위칭 허브의 포트에는 LAN어댑터와 달리 MAC주소가 할당되어 있지 않는다.

패킷을 버퍼 메모리에 저장하면 다음에 수신처 MAC주소와 일치하는 것이 MAC주소표에 등록되어 있는지 조사한다. 

일치한다면 스위치 회로를 경유하여 패킷을 송신측의 포트에 보낸다.

송신 동작중에 다른 기기가 보낸 신호가 수신측에 들어오면 패킷일 충돌하므로 **재밍신호**를 보낸 후 송신 동작을 중지하고 잠시 기다렸다가 다시 보낸다.

### 2.MAC주소 테이블 등록 및 갱신

스위칭 허브는 패킷을 중계할 때 MAC주소표의 내용을 갱신하는 동작도 실행한다.

갱신 동작은 두 종류가 있다.

1.패킷을 수신했을때 송신처 MAC주소를 조사하고, 이것을 수신한 입력 포트 번호와 하나의 세트로 MAC주소표에 등록하는 것이다.

2.MAC주소표에 등록한 정보는 그래도 두는 것이 아니라 일정시간이 경과하면 삭제하는 것이다.

### 3.예외적인 동작

1.송신포트가 패킷을 수신한 포트와 같은 경우

스위칭 허브는 패킷을 수신한 포트와 송신하는 포트가 같을 경우 패킷을 중계하지 않고 폐기한다.

2.MAC주소표에 수신처 MAC주소와 일치하는 주소가 등록되어 있지 않은 경우

패킷이 한번도 스위칭 허브에 도착하지 않은 경우이거나, 시간이 경과하여 MAC주소표에서 삭제된 경우이다.

어느 포트에서 송신해야 할지 판단할 수 없으므로 수신 포트 이외의 전체 포트에서 패킷을 송신한다.

3.MAC주소가 **브로드캐스트주소** 인 경우

수신포트를 제외한 모든 포트에 패킷을 송신한다.

### 4.전이중 모드에서 송신과 수신을 동시에 실행

**전이중 모드**는 송신과 수신을 동시에 실행 가능, 즉 리피터 허브에 없는 스위칭 허브의 특징이다.

리피터 허브에서는 충돌이라는 현상이 발생하지 않는다.

이더넷에 신호가 흐르고 있을때는 이것이 끝나기를 기다렸다가 송신 동작을 실행하므로 그대로는 송신과 수신을 동시에 실행할 수 없다.

이에 필요한 것이 신호의 충돌을 검출하는 회로를 무시하는 ‘전이중’이라는 동작모드이다.

### 5.최적의 전송 속도로 보내는 자동 조정

전이중모드와 반이중 모드를 자동으로 전환하는 **자동조정** 이라는 기능이 있다.

이더넷은 데이터가 흐르고 있지 않을때는 **링크펄스**라는 펄스형의 신호를 흘린다.

특정패턴으로 펄스신호를 송신하여 자신의 상황을 상대에게 전하는 방법을 이용한다.

### 6.스위칭 허브는 복수의 중계 동작을 동시에 실행한다.

**스위칭 허브(스위치)**는 수신처 MAC주소의 기기가 존재하는 포트 이외에는 송신 동작을 실행하지 않으므로 다른 포트는 빈 상태가 된다. 비어있기에 별도의 패킷을 흘릴 수 있고 이렇게 여러개의 패킷을 중계할 수 있다.

다만 **리피터 허브(허브)**는 복수의 신호를 전달 할 수 없기 때문에 기기전체에서 중계 할 수 있는 패킷의 수는 스위치쪽이 허브쪽 보다 많다.

## 키워드

### RJ-45

1. RJ-45잭
- 8가닥(4쌍)을 갖는 모듈러 형태의 연결용 잭(Jack)을 일컬음
    - 전화기 연결용 잭의 모양이며, 이중와선의 LAN연결에 많이 사용
1. 케이블 심선 색상 및 핀(PIn)번호
- 색상 순서(EIA/TIA568 B를 기준)
    - 핀 번호
        - 흰/주(1),주황(2), 흰/녹(3), 청색(4), 흰/청(5),녹색(6),흰/갈(7), 갈색(8)
    - 쌍 번호
        - Pair 1: 청색(4), 흰/청(5)
        - Pair 2:흰/주황(1), 주황색(2)
        - Pair 3:흰/녹(3), 녹색(6)
        - Pair 4:흰/갈(7),갈색(8)
    
![Untitled](https://github.com/johnny19991006/1-percent-network/assets/79901434/ba3a66d6-597f-4db0-8985-829de1f3a708)

    
- EIA/TIA 568 A 및 B의 8핀 모듈러 잭 핀 배열에 대한 그림

![Untitled 1](https://github.com/johnny19991006/1-percent-network/assets/79901434/e3959073-2513-4eec-a087-ac29a8e788b9)


둘의 기능적 차이는 없다

1. 통신 방식별 핀 사용 방식
- Ethernet 10/100Mbps 에서는 → 2Pair(4가닥)의 선만 사용
    - 송신: 1,2번 쌍
    - 수신: 3,6번 쌍
    - 기타: 4,5번/7,8번 쌍
- Gigabit Ethernet 에서는 → 4Pair(8가닥)의 선 모두 사용
- 음성회선 수용시에는 → 1Pair 만 사용 즉, (4번5번)또는 (7번,8번)

### MDI/MDI-X

1. MDI(Medium Dependent Interface, 매개 의존 인터페이스)
- LAN카드에서 사용하는 매체에 따라 달라지는(의존하는)인터페이스
    - 즉, 커넥터(RJ-45)와 같은 실제 접속부를 말한다
- 한편
    - 사용매체가 TP케이블이면, TP-MDI라고 하고,
    - 광섬유라면, FIber-MDI등으로 표현한다
1. TP-MDI, Fiber-MDI

![Untitled 2](https://github.com/johnny19991006/1-percent-network/assets/79901434/94633c98-c4f3-482f-a4ce-7a760344887d)


3.TP케이블에서 ,Auto MDI/MDI-X

- MDI 연결 방식: 장비간에 **’다이렉트 케이블**’ 연결 방식을 취하는 것이다
    - 핀 배치
        - DTE(PC,서버 등) : (송신 :1,2 수신:3,6)
        - DCE(허브,스위치 등) : (수신:1,2 송신:3,6)
    - 즉, TP 케이블에서, 순서 변화없이 그대로 연결한다
        - PC/서버/라우터 ↔HUB/스위치 (허브,스위치 등을 통하여 PC/서버/라우터 연결)
        

        스트레이트(Straight-though)케이블: PC와 스위치/무선공유기 연결에 사용하는 케이블
        ![Untitled 3](https://github.com/johnny19991006/1-percent-network/assets/79901434/88416fb5-7d42-443f-974b-12ebd7925406)

    
- MDI-X연결 방식: 장비간에 ’크로스오버 케이블’ 연결 방식을 취하는 것이다
    - 핀 배치
        - DTE(동일 유형) : (송신 : 3,6 수신 :1,2)
        - DCE(동일 유형): (송신:3,6 수신:1,2)
    - 즉 TP케이블에서 1번과 3번 / 2번과 6번 을 엇갈리어(교차하도록 ) 연결한다
        - PC↔ PC, HUB↔HUB,스위치↔스위치
        
        ![Untitled 4](https://github.com/johnny19991006/1-percent-network/assets/79901434/b4e8674f-28a6-48fe-a787-018672857777)

        
        크로스(Crossover)케이블: 스위치와 스위치,PC와 PC등 동일 특성 장비 연결에 사용하는 케이블
        
- 요즘 스위치 장비들은 Direct연결  또는 Crossover 연결을 자동 인식하여,
    - 이에 맞추는 Auto MDI/MDI-X라는 기능을 갖췄다
    - 즉 TX/RX(1,2핀 및 3,6핀)을 알아서 판단해준다

### 재밍신호

이더넷프레임의 송출 노드가 최대왕복전파시간 이내에 즉, 최소크기 프레임을 다보내기도 전에 자신이 보낼 수 있는 신호 접압보다 더 큰 전압을 감지하면, 충돌이 발생하였다는 사실을 인지하게 되며, 이를 다른 노드에게 강조하여 알리는 32비트의 별의미없는 데이터로 짧게 구성된 신호이다

### MAC주소

일종의 고유번호로써 이더넷의 물리적인 주소를 말한다. 보통 랜카드의 주소라고 보면 되며 이 AMC주소는 세계에서 유일한 번호이다.

### 브로드캐스트 주소

브로드캐스트 주소란 특정 네트워크에 속하는 모든 호스트들이 듣게 되는 주소를 의미한다. 네트워크주소와는 반대로 특정 네트워크의 맨 마지막 주소를 브로드캐스트주소로 사용한다.

예를들어 C클래스 하나로 특정 네트워크를 구성하였고 네트워크 주소가 192.168.2.0이라고 한다면 브로드캐스트주소는 192.168.2.255이다.

네트워크 IP주소는 그 네트워크에 속하는 모든 IP주소 가운데 맨 첫번째 IP주소를 사용하고 브로드캐스트IP주소는 그 네트워크에 속하는 모든 IP주소 가운데 맨 마지막 IP주소를 사용한다.

### 전이중 모드&자동조정

자동조정에서 사용자의 시스템은 사용자의 시스템과 해당링크 상대사이에 구성 데이터를 전송하려고 찾는 이더넷 링크 펄스를 송신한다. 각 링크 상대는 회선 속도와 양방향 전송 모드에 대해 지원되는 값을 공유하여 가장 높은 공통값을 찾는다.

- 100Gbps 전체 양방향
- 25Gbps 전체 양방향
- 10Gbps 전이중
- 1Gbps 전이중
- 1Gbps 반이중
- 100Mbps 전이중
- 100Mbps 반이중
- 10Mbps 전이중
- 10Mbps 반이중

가장높은 공통값은 위와 같다.

시스템과 해당링크상대는 자동조정을 사용하여 연결을 빠르게 설정할 수 있다. 그러나 양쪽 시스템이 모두 자동조정을 지원해야 한다. 

### 나머지 키워드는 5주차의 내용을 참고하면 된다.

[4주차](https://www.notion.so/4-a750ef166f0c407c9273df6b63f2c8fe?pvs=21) 

출처:

[성공과 실패를 결정하는 1%의 네트워크](https://www.yes24.com/Product/Goods/3246410)

[컴퓨터 네트워킹 하향식 접근](https://product.kyobobook.co.kr/detail/S000061694627)

강승찬p 인터네트워킹

이재오p 컴퓨터네트워크

설순욱p 데이터통신

김한종p 디지털통신

박형근p 통신신호처리 및 실습

[http://www.ktword.co.kr/test/view/view.php?m_temp1=2026](http://www.ktword.co.kr/test/view/view.php?m_temp1=2026)

[http://www.ktword.co.kr/test/view/view.php?nav=2&no=1411&sh=rj-45](http://www.ktword.co.kr/test/view/view.php?nav=2&no=1411&sh=rj-45)

[http://www.ktword.co.kr/test/view/view.php?m_temp1=3963](http://www.ktword.co.kr/test/view/view.php?m_temp1=3963)

[https://www.ibm.com/docs/ko/i/7.5?topic=capabilities-auto-negotiation](https://www.ibm.com/docs/ko/i/7.5?topic=capabilities-auto-negotiation)
