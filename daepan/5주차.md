3.1.1 하나하나의 패킷이 독립된 것으로 동작한다.

패킷이 전송되는 과정에서 패킷의 헤더만 보고 중계장치(라우터, 허브)들이 전달하기에 데이터 부분에 프로토콜 제어 동작이나, 애플리케이션 데이터가 영향을 줄 수 없습니다.

그리고 이렇게 전달되는 패킷은 어떻게 인터넷에 나가게 되는 것일까?

3.1.2 LAN 케이블은 신호를 약화시키지 않는 것이 핵심이다.
먼저 LAN 어댑터에서 PHY 회로에서 패킷이 전기 신호의 형태로 변경되어 데이터 전송 준비가 되었다고 생각해보십니다.

그렇다면 이 LAN 어댑터의 꽂혀 있는 LAN 선에 패킷 전기 신호를 흘려보네서 리피터 허브의 커넥터 부분으로 보냅니다.

이 과정에서 리피터 허브까지 도착할때 데이터는 신호가 약해집니다.,
이 신호가 약해진다는 것은 주파수의 신호가 약해졌음을 의미합니다.
~(LK-99이 있었다면…)~

단순한 변화 뿐만 아니라 잡음(노이즈)이라는 문제 또한 발생합니다

3.1.3 꼬임은 잡음을 방지하기 위한 방법이다.
실제 우리가 사용하는 인터넷 LAN선의 안쪽에 가닥 선들을 보면 총 8개의 갈연주파흰 색이 혼합되 있는 4개의 쌍선이 보입니다.

굳이 왜 선을 이렇게 꼬아두는 것일까요?

여러분들 물리시간에 배운(배웠을 겁니다) 오른손 법칙에 대해 생각해보죠

전류의 방향을 통해 자기장이 발생한다는 사실에서 각 전류의 방향에서 모든 선이 일직 선상에 있다면은 서로가 서로에게 자기장의 영역에 겹치게 되는데 이를 해결하기 위해 선을 꼬게 된 것이다.
간단하게 생각하면 이런 자기장을 상쇄하여 노이즈를 줄이고자 선을 꼬았다는 것으로 이해하면 좋을 것 같습니다

케이블의 영향을 주는 신호선의 영향으로 이러한 노이즈 뿐만 아니라 주변의 다른 케이블의 영향으로 신호가 섞이는 경우가 있는 데 이를 크로스토크 라고 합니다.

실제로 유선전화를 예시로 크로스토크의 영향으로 4명이서 통화가되는 예시가 있습니다.

3.1.4 리피터 허브는 연결되어 있는 전체 케이블에 신호를 송신한다.

노이즈 설명 이전에 리피터허브에 신호가 도착한다는 말로 마무리가 되었는데, 이제 신호를 받은 리피터 허브가 어떻게 동작하는지 설명드리겠습니다.

리피터 허브에 도착한 수신내용은 허브 내부에 있는 

리피터 허브는 받은 신호를 LAN 전체에 뿌리게 됩니다.
전체에 패킷의 신호를 뿌리고 수신하느 MAC 주소에 해당하는 기기만 패킷을 수신하게 됩니다.

이떄 리피터 허브 내에서도 PHY와 같이 데이터를 전기신호로 변환해서 주는 내용이 있는데,
데이터를 받는 수신 부분과 송신 부분이 나누어져 있습니다.
허브 안에서 PHY 회로와 커넥터 사이의 신호선을 교차시켜서 접속함으로써, 한쪽의 송신이 상대의 수신에 연결되어 신호를 송수신할 수 있게 되는 것입니다.

여기서 MDI/MDI-X에 대한 내용이 있는데 쉽게 요약해드리면 아래와 같습니다
```
MDI (Medium Dependent Interface):

일반적으로 이더넷 스위치, 허브, 라우터와 같은 네트워크 장비의 포트를 나타냅니다.
컴퓨터, 서버, 라우터, 스위치의 일반적인 Ethernet 포트가 이에 해당합니다.
일반적으로 "스트레이트 스루" (straight-through) 케이블을 사용하여 MDI 포트에서 다른 MDI-X 포트로 연결됩니다.
MDI-X (Medium Dependent Interface Crossover):

전통적인 허브나 스위치의 포트가 이에 해당하며, 특히 허브에서는 MDI-X가 표준이었습니다.
MDI-X 포트는 전송선(Tx)과 수신선(Rx)이 교차되어 있습니다. 이로 인해 두 대의 일반 컴퓨터 (또는 두 대의 MDI 포트를 가진 장치)를 "크로스오버" (crossover) 케이블을 사용하여 직접 연결할 수 있습니다.
예시:

스트레이트 스루 케이블:
컴퓨터 (MDI)와 스위치 (MDI-X) 사이의 연결에 사용됩니다.
크로스오버 케이블:

두 대의 컴퓨터 (MDI - MDI)나 두 대의 스위치 (MDI-X - MDI-X) 사이의 연결에 사용됩니다.
그러나 현대의 많은 장비는 "자동 MDI/MDI-X" 기능을 제공합니다. 이 기능을 통해 장비는 자동으로 MDI와 MDI-X 설정을 감지하고 조정할 수 있습니다. 따라서 크로스오버 케이블이 필요 없게 되며, 대부분의 경우 스트레이트 스루 케이블만 사용하면 됩니다.
```

## 3.2 스위칭 허브의 패킷 중계 동작

### 3.2.1 스위칭 허브는 주소테이블로 중계한다.
패킷이 스위칭 허브를 경유하여 데이터가 전송된다는 것이 이해가 되었습니다.
그렇다면 스위칭 허브에서는 목적지를 어떻게 보내주고 저장해둘까요?

먼저 스위칭 허브의 커넥터 내부회로를 포트라고 합니다.
스위칭 허브의 허브의 각 포트에는 MAC주소가 할당되어 있지 않기 때문에 패킷에 대한 수신처 MAC주소를 검사하지 않고
버퍼메모리에 저장합니다.

이렇게 저장된 패킷은 수신처 MAC주소와 일치하는 것이 MAC주소표에 등록되어 있는지를 조사합니다.
이 주소표에서는 기기의 MAC 주소와 그 기기가 어느 포트에 존재하는지에 대한 정보가 등록되어 있습니다.

이 주소표를 통해 수신한 패킷을 어느 포트에서 송신하면 좋을지를 판단하여, 스위치 회로를 타고 송신할 포트로 보내게 됩니다.

스위치회로를 타는 경우에도 이더넷 규칙에 따라 아무도 송수신 과정을 사용하지 않는 것을 확인하고 타게됩니다.
이때 만약 사용 중에 보내게 되었다면 재밍신호를 발생시킵니다.


### 3.2.2 MAC 주소 테이블을 등록 및 갱신한다.
스위칭 허브는 패킷 중계 과정에서 MAC 주소의 내용을 갱신하는 동작도 실행합니다.

갱신 방식은 생성과 삭제에 있는데
생성에서는, 수신한 패킷의 MAC주소를 읽으면서, 이 패킷을 받은 수신포트와 패킷을 내보낸 송신 포트를 하나의 세트로 하여 MAC주소표에 등록합니다.
이렇게 등록을 해두면 앞으로 이 수신포트에서 오는 정보들은 기록해둔 송신포트로 중계를 할 수 있게 되며, 이 동작이 한번만 이루어져도 주소표에 등록됩니다.

삭제에서는, 사용하지 않는 경우 일정시간이 지나게 되면 삭제가 진행되어 자체으로 진행됩니다.

### 3.2.3 예외적인 동작
예외 사항 1: 수신과 송신포트가 동일한 경우?
이는 스위칭 허브에서 수신한 포트와 송신할 포트가 동일하다면 자동적으로 폐기합니다.

예외 사항 2: MAC 주소표에 수신처 MAC주소와 일치하는 주소가 등록되어 있지 않다면?
브로드캐스트를 통해 전체포트에서 데이터를 송신합니다. 문제가 생길꺼라고 생각되지만 이더넷 원칙상 자신이 수신해야하는 데이터가 아닌 경우에는 폐기하는 원리가 성립하므로
패킷 송신이 무시되기에 큰 상관은 없습니다.

### 3.3.4 전이중 모드에서 송신과 수신을 동시에 실행한다.
리피터 허브에서는 데이터 송수신과정이 동시에 일어나면 데이터가 섞여서 원래 전송하고자 하는 데이터에 문제가 발생할 수 있습니다.
이를 충돌이라하며, 이런 현상은 스위치 허브에서는 일어나지 않습니다.

기본적으로 스위치 허브에서는 트위스트 페어 케이블이라는 송신과 수신을 구분지어둔 케이블을 통해 이루어져 있기 떄문에,
송수신 도중에 충돌이 일어나지 않습니다.
즉, 스위칭 허브의 포트 부분이나 LAN 어댑터에 있는 PHY회로와 MAC 회로의 내부도 송신과 수신이 나뉘어져 있어서 신호가 따로 흐르기 떄문에 충돌하지 않습니다.
이러한 특성에서 반이중 모드의 충돌방지 대책이 필요가 없기에, 이더넷의 송수신이 동시에 시행할 수 없다는 충돌 검출모드를 무시합니다.
이 동작을 **전이중 모드**라고합니다.

### 3.2.5 최적의 전송속도를 보내는 자동조정

자동조정: 전이중 모드에 등장에 따라 수동으로 동작모드를 전환하지 않고, 접속한 상대 전이중 모드를 지원하는 기기인지를 확인하여 동작모드를 자동으로 변경하는 기능

그렇다면 이 자동조정은 어떻게 판단하여 작동하는가?
이더넷은 데이터가 흐르지 않을 때는 링크펄스라는 펄스형 신호를 흐르게 합니다.
이것이 흐르지 않을 때는 상대방이 올바르게 작동하지 않는다는 신호입니다.
간단히 생각하면, 우리 LAN선에서 깜빡거리는 녹색신호를 생각하면 좋습니다.

펄스신호를 통해서 특정패턴 신호를 보내 지원가능한 모드와 전송속도를 서로에게 통지하여 최적의 데이터 전송 조합을 선택하여 각각의 자신을 자동으로 조정하게 됩니다.

### 3.2.6 스위칭허브는 복수의 중계동작을 동시에 실행한다.
스위칭 허브는 MAC 주소의 기기가 존재하는 포트 이외의 빈 포트를 활용하여 동시에 여러개의 패킷을 중계할 수 있습니다.
그렇기에 리피터 허브와 비교했을 때 기기 전체에서 중계할 수 있는 패킷의 수가 월등히 더 많습니다.