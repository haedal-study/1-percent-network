# 인터넷 유선 통신 (ADSL과 FTTH)

인터넷 접속용 라우터를 통해 인터넷으로 패킷이 나왔다. 그 이후 과정을 살펴보자.

## 유선 통신 관점에서의 인터넷

우선, 인터넷은 라우터를 사용한다는 점에서 LAN과 유사하다. 하지만, 장치 간 거리가 길며 라우터에 등록된 정보가 사내 LAN보다 훨씬 많고 변경과 장애도 빈번하게 발생한다는 차이가 있다.

## 액세스 회선

장치 간 거리가 길기 때문에 이더넷 규칙이 아닌 다른 액세스 회선의 규칙에 따라 패킷 송신을 하게된다.

액세스 회선은 LAN과 연결하는 유선 통신 회선을 의미한다. 액세스 회선의 종류로는 ISDN, ADSL, VDSL, FTTH 등이 있다.

- ISDN: 기존 방식과 달리, 하나의 회선으로 인터넷과 전화 모두 지원함.

  ![Image](https://i.imgur.com/T3dH0XD.png)
- ADSL: 비교적 고속 통신을 지원, 다운로드 속도가 업로드 속도에 비해 빠른 비대칭 통신 방식이다.
  
  ![Image](https://i.imgur.com/2i39GAj.png)
- VDSL: ADSL보다 빠른 속도를 지원한다.
  
  ![Image](https://i.imgur.com/2tk2XML.png)
- FTTH: 광 케이블을 이용해 통신한다. 기가 인터넷도 이에 속한다.
  
  ![Image](https://i.imgur.com/Z5kuhdc.png)

## ADSL

![Image](https://i.imgur.com/EYFYRkg.png)

Asymmetric Digital Subscriber Line의 약자이다. 업로드 속도와 다운로드가 속도가 다른 비대칭 회선이다. 이렇게 설계된 이유는 VOD 서비스를 위해 만들어졌기에 다운로드 속도가 업로드 속도에 비해 더욱 빠르다.

사용자에서 라우터를 통해 송신한 패킷은 ADSL 모뎀, 전화 케이블을 거쳐 전화국에 도착한다. 이 후 ADSL 사업자의 네트워크를 경유하여 ISP로 이동하게 된다.

### 사용자

사용자는 이더넷과 달리 MAC, PPPoE, PPP 헤더 붙이며, ADSL 모뎀에 송신한다.

### ADSL 모뎀

![Image](https://i.imgur.com/UTbRetQ.png)

(ADSL 모뎀의 모습)

패킷을 셀 단위로 분할하여 저장하고 있다가, 신호로 변환하여 전송한다. 오류가 발생할 가능성이 높아 이더넷과 달리 복잡한 신호를 사용한다.

![Image](https://i.imgur.com/KfenWeR.png)
(ASK, PSK)

- ASK는 진폭의 크기에 따라 0과 1로 신호가 나타난다. (진폭이 크면 1, 작으면 0)
- PSK는 파의 각도를 기준으로 0과 1로 신호가 나타난다. (180도에서 시작하면 1, 0도에서 시작하면 0)
- QAM: 위의 두 방식을 결합한 방식이다. 2개의 비트를 표현할 수 있다. ADSL에서는 이를 사용한다.

### 주파수

ADSL은 다양한 파를 사용하여 많은 양의 데이터(비트)를 한 번에 전달할 수 있다. 일정한 주파수 간격으로 많은 파를 송신하며, 수신하는 측에서 특정한 주파수만 필터로 걸러 사용한다.

파가 잡음이 없을 경우 많은 양의 비트를 대응시킬 수 있고, 잡음이 있는 파에는 적은 양의 비트를 대응할 수 있다 따라서, 빠른 속도로 전송하기 위해선 잡음이 없어야 한다. 거리가 멀거나 주파수가 높아질 수록 속도가 느려지는 이유도, 이러한 요인들이 잡음을 만들기 때문이다.

추가로, ADSL에서는 업로드하는 파의 개수보다 다운로드하는 파의 개수가 많아 다운로드의 속도가 빠르다.

모델에 전원을 공급할 때, 시험 신호를 보내고 이를 통해 파의 수와 비트 수를 판단하는 작업을 하는데 이를 트레이닝이라고 한다.

### 스플리터의 역할

![Image](https://i.imgur.com/Qm9UxdL.png)

(스플리터의 모습)


셀이 전기신호로 변환되어 스플리터에 들어온다. 스플리터는 전화회선의 신호가 들어오는 경우 전화의 잡음을 없애기 위해 ADSL과 구분하여준다.

참고로, ADSL은 모뎀에서 차단 기능을 제거해주기에 스플리터에서 ADSL의 신호가 들어온 경우에는 분리할 필요가 없다.

### 전화국으로의 이동

![Image](https://i.imgur.com/C6eI5Zc.png)

스플리터의 모듈형 커넥터를 지나, 전선주의 전화 케이블로 들어가게 된다. 이 후 스플리터를 거쳐 전화국의 DSLAM에 전달되게 된다.

(전선 주를 지나기 전 건물의 배선반(IDF, MDF) 낙뢰 등을 막기 위한 보안기를 거친다.)

![Image](https://i.imgur.com/w8oGGju.png)

(스플리터의 모듈형 커넥터의 모습)


![Image](https://i.imgur.com/lG59LwJ.png)

(배선반의 모습)


![Image](https://i.imgur.com/ueQQWTx.png)

(전선주의 모습)


### 잡음의 영향

전화 케이블은 높은 주파수가 지나간다는 가정하에 만들어졌기 때문에 이더넷에 비해 잡음의 영향을 크게 받는다.

잡음이 발생하게 되면

1. 겹치는 주파수개 생긴다.
2. 겹치는 신호는 사용할 수 없다.
3. 사용할 수 있는 신호의 수가 줄어든다.

의 과정을 거쳐 데이터 전송 속도가 느려지게 된다. 따라서, 전철이 있는 곳이나 전화가 많은 곳에서는 잡음이 많아 데이터 전송 속도가 느릴 수 있다.

### DSLAM과 BAS

![Image](https://i.imgur.com/puVOLPQ.png)

(DSLAM의 모습)


전기 신호가 전화국에 도착하면 DSLAM에 의해 디지털 데이터인 셀로 복원된다. DSLAM은 여러 데이터를 처리할 수 있다는 점에서 여러 개의 ADSL 모뎀을 사용하는 것과 같으나, ADSL 모뎀과는 달리 ATM 인터페이스를 가진다.

![Image](https://i.imgur.com/hsr4KMT.png)

(BAS의 모습)


셀은 DSLAM에서 나와 BAS(Broadband remote access server
)이라는 패킷 중계 장치에 도달한다. 셀에 저장 되어 있던 패킷을 \*ATM 인터페이스에 의해 복원한다. 이 후 BAS를 지정하기 위해 사용했던 헤더들(MAC, PPPoE)를 버리고, 이후 부분을 추출하여 다음 도착지인 터널링 출구로 중계한다.

(터널링 출구 -> 라우터 -> 인터넷 내부로 중계된다.)

\*ATM: 셀을 이용하여, 다양한 타입의 데이터를 처리할 수 있는 패킷 교환 방식이다.

## 광섬유와 FTTH

FTTH(Fiber To The Home, FTTH)는 ADSL와 마찬가지로 액세스 회선 중 하나로, 광섬유를 사용하여 더욱 빠른 통신 속도를 보장한다.

### 광섬유

![Image](https://i.imgur.com/9npGXAK.png)

(광섬유)


![Image](https://i.imgur.com/KDjeEQa.png)

(광 미디어 컨버터)


광섬유는 위 그림과 같이 코어와 슬레드라는 이중 구조로 되어있다. 두 영역의 굴절율 차를 이용하여 빛을 전달하는 방식이다. 송신은 광 미디어 컨버터에 의해 사용자가 입력한 디지털 신호가 전기 신호 -> 광 신호로 변환하여 광섬유에 도달하며, 수신은 빛의 밝기에 따라 다른 전압을 발생시키는 전압 소자에 의해 이루어진다.

### 싱글모드와 멀티모드의 차이

![Image](https://i.imgur.com/1KRHdCj.png)

**싱글 모드**는 가는 코어 속에 반사각이 작은 하나의 광선만 지나갈 수 있도록 한다. 이를 송수신 하기 위해 광원, 수광소자의 성능이 높아저여 한다. 하나의 광선만 사용하기에 분산\*이 일어나지 않고, 전송속도가 빠르며 대역폭이 크다. 변형이 거의 일어나지 않아 먼 거리에 활용할 수 있다.

**멀티 모드**는 굵은 코어에 반사각이 다른 여러 광선이 지나간다. 따라서, 광원과 수광소자의 비용을 줄일 수 있다. 여러 광선을 사용하기에 분산이 일어나고, 전송속도가 느리고 대역폭이 작다. 변형이 많이 일어나 짧은 거리에 활용한다.

\*분산: 입사각 차이에 의해 빛들이 다른 응답속도를 가지게 될 때, 늦게 도착한 빛이 변형된 신호를 일으키는 현상

### FTTH

FTTH는 멀리 떨어진 건물에 접속하기 위해 사용하므로, 먼거리에 활용 가능한 싱글 모드를 사용한다. 분기여부에 따라 크게 두 가지 유형이 존재한다.

#### 분기하지 않는 유형

![Image](https://i.imgur.com/oa28jKA.png)

광섬유가 사용자와 가까운 기지국에 직접 연결하는 방식이다. 미티어 컨버터에서 전기 신호를 광신호로 변환한 후 광섬유가 미디어 컨버터 - BAS 를 통하여 인터넷 내부로 중계된다. 인터넷의 송수신 신호를 모두 처리기 위해 각각을 다른 파장을 사용하고 프리즘의 원리에 의해 분할하는데, 이처럼 여러 광신호를 하나의 광섬유에 흘러보낼 수 있는 것을 **파중 다중(멀티 플렉싱)**이라고 한다.

#### 분기하는 유형

![Image](https://i.imgur.com/P0fCvmj.png)
여러 사용자가 광 스플리터를 이용하여 광섬유를 나누어(분기하여) 사용하는 방식이다.

(분기 유형의 모습)


![Image](https://i.imgur.com/Vrrpinj.png)

(광 스플리터)


분기 유형의 모습에서 살펴볼 수 있듯이, 전화국의 종단점인 OLT에 발생한 신호가 광 스플리터에 의해 분리되고 ONU에 의해 사용자에 전달된다.

OLT는 전화국의 전기 신호를 광신호로 변환하거나, 멀티플렉싱을 조정하는 등 제어의 역할을 한다. ONU는 미티어 컨버터와 마찬가지로, 사용자 측에서 광 신호로 변환, 충돌 방지의 역할을 하고, 패킷에 ONU 식별 정보를 붙여, 정보 누설을 막는다.

#### FTTH에서의 패킷 송신

FTTH에서는 IP 헤더 앞에 MAC, PPPoE, PPP 헤더 부가한다. 이는 변환장치(미디어 컨버터, ONU)에 의해 광 신호로 변환하며, BAS에서 집합형 미디어 컨버터, OLT에 의해 전기신호로 복원된다.
